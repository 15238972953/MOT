# Yolov5_DeepSort_Traffic-counter



## 1、参数设置

在count.py中，设置以下参数
```
source_dir : 要打开的视频文件。若要调用摄像头，需要设置为字符串'0'，而不是数字0，按q退出播放
output_dir : 要保存到的文件夹
show_video : 运行时是否显示
save_video : 是否保存运行结果视频
save_text :  是否保存结果数据到txt文件中，将会保存两个文本文件：result.txt和number.txt。result.txt的格式是(帧序号,框序号,框到左边距离,框到顶上距离,框横长,框竖高,-1,-1,-1,-1)，number.txt的内容是统计到第几帧时每条线沿两个方向的跨线物体数

class_list : 要检测的类别序号，在coco_classes.txt中查看（注意是序号不是行号），可以有一个或多个类别

lines : 定义检测线的两个端点的xy坐标、颜色、粗细，可以定义多条检测线
point_idx : 方框的检测点位置(0, 1, 2, 3, 4)，看下边的图，当一个方框的检测点跨过检测线时，统计数会+1
```

检测线的画法：给出两个端点的坐标，确定一条检测线，画布的坐标方向如下
```
   |-------> x轴
   |
   |
   V
   y轴
```

方框的检测编号：当一个框的检测点跨过检测线时，计数器会+1，检测点的编号如下
```
   1__________________2
   |                  |
   |                  |
   |      0(中心点)    |
   |                  |
   |__________________|
   4                  3
```

## 2、运行

设置好参数后，python运行count.py文件即可
```
python count.py
```
